(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d958"],{f7b3:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("新增")]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.choise.userId?"修改":"新增"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{attrs:{model:e.choise}},[r("el-form-item",{attrs:{label:"手机号码","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.choise.phone,callback:function(t){e.$set(e.choise,"phone",t)},expression:"choise.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"余额","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.choise.sellFee,callback:function(t){e.$set(e.choise,"sellFee",t)},expression:"choise.sellFee"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateOrAdd()}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.booksWithPage.rows,border:""}},[r("el-table-column",{attrs:{align:"center",sortable:"",prop:"userId",label:"用户ID",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号码",width:"130"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"sellFee",label:"余额",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"登录状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:0==t.row.loginStatus?"info":"success"},on:{click:function(r){return e.changeLoginState(t.row.loginStatus,t.row.userId)}}},[e._v(e._s(0==t.row.loginStatus?"未登录":"已登录"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",sortable:"",prop:"updateTime",label:"修改时间"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(r){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.del(t.row.userId)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("div",{staticClass:"block",staticStyle:{padding:"16px 16px"}},[r("el-pagination",{attrs:{"current-page":e.page.index,"page-sizes":[2,5,10,20,30,50,100,200,500],"page-size":e.page.size,layout:"total, sizes, prev, pager, next, jumper",total:e.booksWithPage.total},on:{"update:currentPage":function(t){return e.$set(e.page,"index",t)},"update:current-page":function(t){return e.$set(e.page,"index",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)}}})],1)],1)},n=[],a=(r("96cf"),r("3b8d")),i=r("bc3a"),o=r.n(i),u={data:function(){return{choise:{},users:[],page:{size:5,index:1},dialogFormVisible:!1,formLabelWidth:"120px"}},computed:{userMap:function(){var e={};return this.users.map(function(t){return e[t.userId]=t}),e},booksWithPage:function(){var e=(this.page.index-1)*this.page.size;return{rows:this.users.slice(e,e+this.page.size),total:this.users.length}}},created:function(){this.loadUsers()},methods:{loadUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/user/queryAll").then(function(e){return e.data.data});case 2:this.users=e.sent,null==this.users&&(this.users=[]);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),del:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确认删除用户【"+t+"】？","确认删除",{type:"danger"}).then(Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/user/delete?userId="+t);case 2:r.loadUsers(),r.$message({type:"success",message:"删除成功！"});case 4:case"end":return e.stop()}},e)}))).catch(function(){r.$message({type:"info",message:"已取消删除"})});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),edit:function(e){return this.choise={},this.choise=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0,this.choise},add:function(){return this.dialogFormVisible=!0,this.choise={userId:"",phone:"",sellFee:"",loginStatus:""},this.choise},updateOrAdd:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.choise.userId){e.next=7;break}return e.next=3,o.a.put("/user/update",this.choise);case 3:this.loadUsers(),this.$message({type:"success",message:"修改成功!"}),e.next=11;break;case 7:return e.next=9,o.a.post("/user/insert",this.choise);case 9:this.loadUsers(),this.$message({type:"success",message:"新增成功!"});case 11:return this.choise={},this.dialogFormVisible=!1,e.abrupt("return",this.dialogFormVisible);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeLoginState:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.patch("/user/change/status",{loginStatus:t,userId:r});case 2:this.loadUsers();case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}},l=u,c=r("2877"),p=Object(c["a"])(l,s,n,!1,null,null,null);t["default"]=p.exports}}]);