<template>
    <div class="ids">
        <div class="modalss">
            <div class="modal-set">
                <div style="padding-bottom:90px">
                   <img src="@/assets/picture/1.jpg" width="375" height="300">
                </div>
                <div class="content-bottom" >
                    <div style="font-size:13px">
                            <div class="svg">
                                <div @click="tik()" v-if="tiks === false">
                                    <svg t="1566826255852" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2371" width="16" height="16"><path d="M832 928.00086l-640 0c-52.9288 0-96.00086-43.07206-96.00086-95.99914l0-640c0-52.9288 43.07206-96.00086 96.00086-96.00086l640 0c52.92708 0 95.99914 43.07206 95.99914 96.00086l0 640C928.00086 884.9288 884.9288 928.00086 832 928.00086zM192 160.00086c-17.632039 0-32.00086 14.368821-32.00086 32.00086l0 640c0 17.664722 14.368821 31.99914 32.00086 31.99914l640 0c17.664722 0 31.99914-14.336138 31.99914-31.99914l0-640c0-17.632039-14.336138-32.00086-31.99914-32.00086L192 160.00086z" p-id="2372" fill="#18C3AA"></path></svg>
                                </div>
                                <div @click="tik()" v-if="tiks === true">
                                    <svg t="1566820589525" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2242" width="16" height="16"><path d="M726.976697 393.184142c-12.54369-12.447359-32.831716-12.320065-45.248112 0.25631L448.447252 629.248757l-103.26354-106.112189c-12.352748-12.703669-32.60809-12.927295-45.248112-0.639914-12.672705 12.320065-12.959978 32.60809-0.639914 45.248112l126.016611 129.503454c0.063647 0.096331 0.192662 0.096331 0.25631 0.192662 0.063647 0.063647 0.096331 0.192662 0.159978 0.25631 2.016073 1.983389 4.512082 3.19957 6.880796 4.544765 1.247144 0.672598 2.239699 1.792447 3.519527 2.303346 3.872168 1.599785 8.000645 2.399677 12.096439 2.399677 4.06483 0 8.12794-0.799892 11.967424-2.33603 1.247144-0.512619 2.208735-1.536138 3.392232-2.176052 2.399677-1.343475 4.895686-2.528692 6.944443-4.544765 0.063647-0.063647 0.096331-0.192662 0.192662-0.25631 0.063647-0.096331 0.159978-0.127295 0.25631-0.192662l256.223626-259.008628C739.647682 425.888563 739.520387 405.631501 726.976697 393.184142z" p-id="2243" fill="#18C3AA"></path><path d="M832 928.00086l-640 0c-52.9288 0-96.00086-43.07206-96.00086-95.99914l0-640c0-52.9288 43.07206-96.00086 96.00086-96.00086l640 0c52.92708 0 95.99914 43.07206 95.99914 96.00086l0 640C928.00086 884.9288 884.9288 928.00086 832 928.00086zM192 160.00086c-17.632039 0-32.00086 14.368821-32.00086 32.00086l0 640c0 17.664722 14.368821 31.99914 32.00086 31.99914l640 0c17.664722 0 31.99914-14.336138 31.99914-31.99914l0-640c0-17.632039-14.336138-32.00086-31.99914-32.00086L192 160.00086z" p-id="2244" fill="#18C3AA"></path></svg>
                                </div>
                            </div>
                            <div  style="display:inline-block;margin-left:6px;font-weight: 400;">
                            我已阅读并同意<span style="color:rgb(24, 195, 170)">「多抓鱼协议」</span>
                            </div>                  
                    </div>
                </div>
                <div class="wechat" v-bind:class="tiks===false ? 'colors' : ''">
                    <div style="margin:3px 6px 0 0"><svg t="1566872924608" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3086" width="20" height="20">
                    <path d="M1024 636.032c0-141.888-141.866667-257.429333-301.461333-257.429333-169.088 0-301.866667 115.541333-301.866667 257.429333 0 142.250667 132.778667 257.386667 301.866667 257.386667 35.370667 0 71.146667-9.024 106.496-17.642667l97.450667 53.418667-26.666667-88.789333C970.922667 786.965333 1024 715.84 1024 636.032zM624.618667 591.616c-17.642667 0-35.328-17.664-35.328-35.392 0-17.621333 17.685333-35.328 35.328-35.328 26.752 0 44.458667 17.706667 44.458667 35.328C669.077333 573.952 651.370667 591.616 624.618667 591.616zM820.010667 591.616c-17.664 0-35.306667-17.664-35.306667-35.392 0-17.621333 17.642667-35.328 35.306667-35.328 26.709333 0 44.416 17.706667 44.416 35.328C864.426667 573.952 846.293333 591.616 820.010667 591.616z" p-id="3087" fill="#ffffff"></path><path d="M693.248 347.242667c11.626667 0 23.296 0.810667 34.901333 2.005333-31.274667-146.133333-187.392-254.464-365.674667-254.464C163.370667 94.784 0 230.442667 0 403.029333c0 99.562667 54.208 181.418667 144.917333 244.864L108.8 757.034667l126.826667-63.786667c45.354667 8.810667 81.877333 18.069333 126.848 18.069333 11.221333 0 22.506667-0.405333 33.749333-1.557333-7.232-24.128-11.242667-49.749333-11.242667-75.882667C384.96 475.690667 521.066667 347.242667 693.248 347.242667zM498.133333 248.896c27.285333 0 45.333333 18.069333 45.333333 45.376 0 27.264-18.069333 45.333333-45.333333 45.333333-27.306667 0-54.570667-18.069333-54.570667-45.333333C443.968 266.944 471.210667 248.896 498.133333 248.896zM244.458667 339.562667c-27.306667 0-54.570667-18.048-54.570667-45.333333 0-27.306667 27.285333-45.354667 54.570667-45.354667 27.328 0 45.397333 18.069333 45.397333 45.354667C289.834667 321.130667 271.786667 339.562667 244.458667 339.562667z" p-id="3088" fill="#ffffff"></path></svg></div>
                     <a  id="font-set" href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxe82f5454106275d4&redirect_uri=http://2.p.cn/Authorize&response_type=code&scope=snsapi_userinfo#wechat_redirect">微信登录或注册</a>
                </div>
                <div style="font-size:14px; font-weight: 400;" @click="back()">先不登录</div>
            </div>
        </div>

        <div> 
            
        </div>

    </div>
</template>

<script>
export default {
      data(){
        return{
            tiks:true,
            cell:false,
            wxcode:null,
        }
    },
    computed:{
      
    },
    methods:{
        tik(){
            this.tiks = !this.tiks
        },
        back(){
            this.$router.push({ path: "/" })
        },
        async auth(){
            await this.axios.get("/user/auth?code="+this.wxcode).then(res => {
                if(res.data.code === 0) {
                    this.$localStorage.set("token", res.data.data);
                    this.$message({message: '登录成功',type: 'success'})
                    this.$router.push({ path: "/users" });
                }else if(res.data.code === 230){
                    this.$router.push({ path: "/Enter" });
                }
            })
        }
        
    },
    created() {
        if (localStorage.getItem("token")) {
            this.$router.push({ path: "/" });
        }
            
        this.wxcode=this.$route.query.code;
        console.info(this.wxcode)
        if(this.wxcode != null){
            console.info(this.wxcode)
            this.auth();
        }
  }
}


</script>


<style>
#font-set{
    text-decoration: none;
    color: #ffffff;
}
.modalss{
    display: flex;
    height: 100%;
    margin: 3em 1em ;
    /* margin: 5em 1em ; */
    flex-direction: column;
    
}
.modal-set{
    flex-grow: 1;
    display: flex;
    align-items: center;
    flex-direction:column;
}
.svg{
    display:inline-block;
    margin-right:3px;
    position:relative;
    left: 5px;
    bottom: -3px;
}
.content-bottom{
  
   padding-bottom: 1em;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;

}
.wechat{
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 40px;
    font-size:15px;
    color: #fff;
    background: rgb(24, 195, 170);
    border-color: rgb(24, 195, 170);
    border-radius: 999px;
    margin-bottom: 1.5em;
  
    
}
.colors{
    background: rgb(210, 210, 210);
    border-color: rgb(210, 210, 210);
}
</style>